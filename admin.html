<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple NAVY - 内容编辑工具</title>
    <style>
        :root {
            --primary: #0a192f;
            --secondary: #112240;
            --accent: #64ffda;
            --text: #ccd6f6;
            --light-text: #a8b2d1;
            --card-bg: rgba(17, 34, 64, 0.7);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--primary) 0%, #020c1b 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, var(--accent), #4db5ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .section {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        h2 {
            color: var(--accent);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.2);
        }

        .upload-area {
            border: 2px dashed var(--accent);
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 20px;
        }

        .upload-area:hover {
            background: rgba(100, 255, 218, 0.05);
        }

        .upload-area i {
            font-size: 3rem;
            color: var(--accent);
            margin-bottom: 15px;
        }

        .btn {
            background: var(--accent);
            color: var(--primary);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px;
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: transparent;
            color: var(--accent);
            border: 1px solid var(--accent);
        }

        .editor-container {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .editor-container {
                grid-template-columns: 1fr;
            }
        }

        .log-list {
            margin-bottom: 20px;
        }

        .log-item {
            background: rgba(10, 25, 47, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: var(--transition);
        }

        .log-item:hover {
            background: rgba(10, 25, 47, 0.8);
        }

        .log-item.active {
            border: 1px solid var(--accent);
        }

        .log-item h3 {
            color: var(--accent);
            margin-bottom: 5px;
        }

        .log-item .date {
            color: var(--light-text);
            font-size: 0.9rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: var(--light-text);
        }

        input, textarea {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            background: rgba(10, 25, 47, 0.5);
            color: var(--text);
            transition: var(--transition);
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .download-links {
            margin-top: 20px;
        }

        .link-item {
            background: rgba(10, 25, 47, 0.5);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .link-item label {
            font-weight: 600;
        }

        .actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        .preview {
            margin-top: 30px;
            display: none;
        }

        .preview-content {
            background: white;
            color: #333;
            padding: 20px;
            border-radius: 8px;
            max-height: 400px;
            overflow-y: auto;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 5px;
            background: var(--accent);
            color: var(--primary);
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .notification.show {
            transform: translateX(0);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Simple NAVY 内容编辑工具</h1>
            <p>上传HTML文件，编辑开发日志和下载链接，然后下载修改后的文件</p>
        </header>

        <div class="section">
            <h2>文件上传</h2>
            <div class="upload-area" id="uploadArea">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>点击或拖放HTML文件到这里</p>
                <input type="file" id="fileInput" accept=".html" style="display: none;">
            </div>
            <div style="text-align: center;">
                <button class="btn" id="demoBtn">加载示例文件</button>
            </div>
        </div>

        <div class="editor-container" id="editorContainer">
            <div class="section">
                <h2>开发日志编辑</h2>
                <div class="log-list" id="logList">
                    <!-- 日志列表将通过JS动态生成 -->
                </div>
                <button class="btn" id="addLogBtn"><i class="fas fa-plus"></i> 添加新日志</button>

                <div class="log-form" id="logForm">
                    <div class="form-group">
                        <label for="logTitle">标题</label>
                        <input type="text" id="logTitle" placeholder="输入日志标题">
                    </div>
                    <div class="form-group">
                        <label for="logDate">日期</label>
                        <input type="text" id="logDate" placeholder="例如: 2025年08月30日">
                    </div>
                    <div class="form-group">
                        <label for="logContent">内容</label>
                        <textarea id="logContent" placeholder="输入日志内容"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="logLink">链接URL</label>
                        <input type="text" id="logLink" placeholder="输入Bilibili视频链接">
                    </div>
                    <div class="form-group">
                        <label for="logLinkText">链接文本</label>
                        <input type="text" id="logLinkText" placeholder="输入链接显示文本">
                    </div>
                    <div>
                        <button class="btn" id="saveLogBtn">保存日志</button>
                        <button class="btn btn-secondary" id="cancelLogBtn">取消</button>
                        <button class="btn btn-secondary" id="deleteLogBtn" style="float: right;">删除日志</button>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>下载链接编辑</h2>
                <div class="download-links" id="downloadLinks">
                    <!-- 下载链接将通过JS动态生成 -->
                </div>
                
                <h2 style="margin-top: 30px;">系统要求编辑</h2>
                <div class="form-group">
                    <label for="cpuReq">处理器要求</label>
                    <input type="text" id="cpuReq" placeholder="例如: Intel i5-6600K / AMD Ryzen 5 1600">
                </div>
                <div class="form-group">
                    <label for="ramReq">内存要求</label>
                    <input type="text" id="ramReq" placeholder="例如: 8 GB RAM">
                </div>
                <div class="form-group">
                    <label for="gpuReq">显卡要求</label>
                    <input type="text" id="gpuReq" placeholder="例如: NVIDIA GTX 1060 / AMD RX 580">
                </div>
                <div class="form-group">
                    <label for="storageReq">存储空间要求</label>
                    <input type="text" id="storageReq" placeholder="例如: 1 GB 可用空间">
                </div>
            </div>
        </div>

        <div class="actions" id="actionButtons" style="display: none;">
            <button class="btn" id="previewBtn"><i class="fas fa-eye"></i> 预览更改</button>
            <button class="btn" id="downloadBtn"><i class="fas fa-download"></i> 下载修改后的文件</button>
        </div>

        <div class="preview" id="previewSection">
            <h2>预览</h2>
            <div class="preview-content" id="previewContent">
                <!-- 预览内容将通过JS动态生成 -->
            </div>
        </div>
    </div>

    <div class="notification" id="notification">操作成功!</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 元素引用
            const uploadArea = document.getElementById('uploadArea');
            const fileInput = document.getElementById('fileInput');
            const editorContainer = document.getElementById('editorContainer');
            const actionButtons = document.getElementById('actionButtons');
            const logList = document.getElementById('logList');
            const logForm = document.getElementById('logForm');
            const downloadLinks = document.getElementById('downloadLinks');
            const previewSection = document.getElementById('previewSection');
            const previewContent = document.getElementById('previewContent');
            const notification = document.getElementById('notification');
            
            // 按钮引用
            const demoBtn = document.getElementById('demoBtn');
            const addLogBtn = document.getElementById('addLogBtn');
            const saveLogBtn = document.getElementById('saveLogBtn');
            const cancelLogBtn = document.getElementById('cancelLogBtn');
            const deleteLogBtn = document.getElementById('deleteLogBtn');
            const previewBtn = document.getElementById('previewBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            
            // 表单字段引用
            const logTitle = document.getElementById('logTitle');
            const logDate = document.getElementById('logDate');
            const logContent = document.getElementById('logContent');
            const logLink = document.getElementById('logLink');
            const logLinkText = document.getElementById('logLinkText');
            
            // 系统要求字段引用
            const cpuReq = document.getElementById('cpuReq');
            const ramReq = document.getElementById('ramReq');
            const gpuReq = document.getElementById('gpuReq');
            const storageReq = document.getElementById('storageReq');
            
            // 全局变量
            let originalContent = '';
            let currentLogs = [];
            let currentDownloadLinks = [];
            let currentSystemReqs = {};
            let editingLogIndex = -1;
            
            // 事件监听器
            uploadArea.addEventListener('click', () => fileInput.click());
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.style.background = 'rgba(100, 255, 218, 0.1)';
            });
            uploadArea.addEventListener('dragleave', () => {
                uploadArea.style.background = '';
            });
            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.style.background = '';
                if (e.dataTransfer.files.length) {
                    handleFileUpload(e.dataTransfer.files[0]);
                }
            });
            fileInput.addEventListener('change', (e) => {
                if (e.target.files.length) {
                    handleFileUpload(e.target.files[0]);
                }
            });
            
            demoBtn.addEventListener('click', loadDemoContent);
            addLogBtn.addEventListener('click', addNewLog);
            saveLogBtn.addEventListener('click', saveLog);
            cancelLogBtn.addEventListener('click', cancelEdit);
            deleteLogBtn.addEventListener('click', deleteLog);
            previewBtn.addEventListener('click', previewChanges);
            downloadBtn.addEventListener('click', downloadModifiedFile);
            
            // 显示通知
            function showNotification(message) {
                notification.textContent = message;
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }
            
            // 处理文件上传
            function handleFileUpload(file) {
                if (file.type !== 'text/html') {
                    showNotification('请上传HTML文件');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    originalContent = e.target.result;
                    parseContent(originalContent);
                    editorContainer.style.display = 'grid';
                    actionButtons.style.display = 'flex';
                    showNotification('文件上传成功');
                };
                reader.readAsText(file);
            }
            
            // 加载示例内容
            function loadDemoContent() {
                originalContent = document.documentElement.outerHTML;
                parseContent(originalContent);
                editorContainer.style.display = 'grid';
                actionButtons.style.display = 'flex';
                showNotification('示例内容加载成功');
            }
            
            // 解析HTML内容
            function parseContent(content) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(content, 'text/html');
                
                // 解析开发日志
                const logElements = doc.querySelectorAll('.dev-log');
                currentLogs = [];
                
                logElements.forEach(logElement => {
                    const titleElement = logElement.querySelector('h4');
                    const dateElement = logElement.querySelector('.date');
                    const contentElement = logElement.querySelector('p');
                    const linkElement = logElement.querySelector('a');
                    
                    currentLogs.push({
                        title: titleElement ? titleElement.textContent : '',
                        date: dateElement ? dateElement.textContent : '',
                        content: contentElement ? contentElement.innerHTML : '',
                        link: linkElement ? linkElement.href : '',
                        linkText: linkElement ? linkElement.textContent : ''
                    });
                });
                
                renderLogList();
                
                // 解析下载链接
                const linkElements = doc.querySelectorAll('.download-btn');
                currentDownloadLinks = [];
                
                linkElements.forEach(linkElement => {
                    currentDownloadLinks.push({
                        text: linkElement.textContent.trim(),
                        url: linkElement.href
                    });
                });
                
                renderDownloadLinks();
                
                // 解析系统要求
                const sysReqElements = doc.querySelectorAll('#download ul li');
                if (sysReqElements.length >= 4) {
                    currentSystemReqs = {
                        cpu: sysReqElements[0].textContent.replace('处理器: ', ''),
                        ram: sysReqElements[1].textContent.replace('内存: ', ''),
                        gpu: sysReqElements[2].textContent.replace('显卡: ', ''),
                        storage: sysReqElements[3].textContent.replace('存储: ', '')
                    };
                    
                    // 填充系统要求表单
                    cpuReq.value = currentSystemReqs.cpu;
                    ramReq.value = currentSystemReqs.ram;
                    gpuReq.value = currentSystemReqs.gpu;
                    storageReq.value = currentSystemReqs.storage;
                }
                
                // 隐藏表单直到选择日志
                logForm.style.display = 'none';
            }
            
            // 渲染日志列表
            function renderLogList() {
                logList.innerHTML = '';
                
                currentLogs.forEach((log, index) => {
                    const logItem = document.createElement('div');
                    logItem.className = 'log-item';
                    logItem.innerHTML = `
                        <h3>${log.title}</h3>
                        <div class="date">${log.date}</div>
                    `;
                    
                    logItem.addEventListener('click', () => editLog(index));
                    logList.appendChild(logItem);
                });
            }
            
            // 渲染下载链接
            function renderDownloadLinks() {
                downloadLinks.innerHTML = '';
                
                currentDownloadLinks.forEach((link, index) => {
                    const linkItem = document.createElement('div');
                    linkItem.className = 'link-item';
                    linkItem.innerHTML = `
                        <label>链接 ${index + 1}:</label>
                        <input type="text" class="link-text" value="${link.text}" data-index="${index}" placeholder="链接文本">
                        <input type="text" class="link-url" value="${link.url}" data-index="${index}" placeholder="链接URL" style="margin-top: 8px;">
                    `;
                    downloadLinks.appendChild(linkItem);
                });
                
                // 添加事件监听器
                document.querySelectorAll('.link-text').forEach(input => {
                    input.addEventListener('change', updateLink);
                });
                
                document.querySelectorAll('.link-url').forEach(input => {
                    input.addEventListener('change', updateLink);
                });
            }
            
            // 更新链接
            function updateLink(e) {
                const index = parseInt(e.target.dataset.index);
                const field = e.target.classList.contains('link-text') ? 'text' : 'url';
                currentDownloadLinks[index][field] = e.target.value;
            }
            
            // 编辑日志
            function editLog(index) {
                editingLogIndex = index;
                const log = currentLogs[index];
                
                // 填充表单
                logTitle.value = log.title;
                logDate.value = log.date;
                logContent.value = log.content;
                logLink.value = log.link;
                logLinkText.value = log.linkText;
                
                // 显示表单
                logForm.style.display = 'block';
                deleteLogBtn.style.display = 'block';
                
                // 高亮选中的日志
                document.querySelectorAll('.log-item').forEach((item, i) => {
                    item.classList.toggle('active', i === index);
                });
            }
            
            // 添加新日志
            function addNewLog() {
                editingLogIndex = -1;
                
                // 清空表单
                logTitle.value = '';
                logDate.value = '';
                logContent.value = '';
                logLink.value = '';
                logLinkText.value = '';
                
                // 显示表单
                logForm.style.display = 'block';
                deleteLogBtn.style.display = 'none';
                
                // 移除所有高亮
                document.querySelectorAll('.log-item').forEach(item => {
                    item.classList.remove('active');
                });
            }
            
            // 保存日志
            function saveLog() {
                const newLog = {
                    title: logTitle.value,
                    date: logDate.value,
                    content: logContent.value,
                    link: logLink.value,
                    linkText: logLinkText.value
                };
                
                if (editingLogIndex === -1) {
                    // 添加新日志
                    currentLogs.unshift(newLog);
                } else {
                    // 更新现有日志
                    currentLogs[editingLogIndex] = newLog;
                }
                
                renderLogList();
                logForm.style.display = 'none';
                showNotification('日志已保存');
            }
            
            // 取消编辑
            function cancelEdit() {
                logForm.style.display = 'none';
            }
            
            // 删除日志
            function deleteLog() {
                if (editingLogIndex !== -1) {
                    currentLogs.splice(editingLogIndex, 1);
                    renderLogList();
                    logForm.style.display = 'none';
                    showNotification('日志已删除');
                }
            }
            
            // 预览更改
            function previewChanges() {
                const modifiedContent = generateModifiedHTML();
                previewContent.innerHTML = modifiedContent;
                previewSection.style.display = 'block';
                
                // 滚动到预览区域
                previewSection.scrollIntoView({ behavior: 'smooth' });
            }
            
            // 生成修改后的HTML
            function generateModifiedHTML() {
                const parser = new DOMParser();
                const doc = parser.parseFromString(originalContent, 'text/html');
                
                // 更新开发日志
                const logContainer = doc.getElementById('dev-log');
                if (logContainer) {
                    // 清除现有日志
                    const existingLogs = logContainer.querySelectorAll('.dev-log');
                    existingLogs.forEach(log => log.remove());
                    
                    // 添加更新后的日志
                    currentLogs.forEach((log, index) => {
                        const logElement = doc.createElement('div');
                        logElement.className = `dev-log animate ${index > 0 ? 'delay-' + Math.min(index, 2) : ''}`;
                        
                        logElement.innerHTML = `
                            <h4>${log.title}</h4>
                            <span class="date">${log.date}</span>
                            <p>${log.content}</p>
                            <div>
                                <i class="fas fa-play-circle"></i>
                                <a href="${log.link}" target="_blank">${log.linkText}</a>
                            </div>
                        `;
                        
                        logContainer.appendChild(logElement);
                    });
                }
                
                // 更新下载链接
                const downloadButtons = doc.querySelectorAll('.download-btn');
                currentDownloadLinks.forEach((link, index) => {
                    if (downloadButtons[index]) {
                        downloadButtons[index].textContent = link.text;
                        downloadButtons[index].href = link.url;
                    }
                });
                
                // 更新系统要求
                const sysReqElements = doc.querySelectorAll('#download ul li');
                if (sysReqElements.length >= 4) {
                    sysReqElements[0].textContent = cpuReq.value;
                    sysReqElements[1].textContent = ramReq.value;
                    sysReqElements[2].textContent = gpuReq.value;
                    sysReqElements[3].textContent = storageReq.value;
                }
                
                // 返回完整的HTML字符串
                return '<!DOCTYPE html>\n' + doc.documentElement.outerHTML;
            }
            
            // 下载修改后的文件
            function downloadModifiedFile() {
                const modifiedContent = generateModifiedHTML();
                const blob = new Blob([modifiedContent], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = 'index.html';
                document.body.appendChild(a);
                a.click();
                
                // 清理
                setTimeout(() => {
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 100);
                
                showNotification('文件下载成功');
            }
        });
    </script>

    <!-- Font Awesome 图标 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
</body>
</html>